{% from "vpn/map.jinja" import vpn with context %}
{% from "ca/map.jinja" import ca with context %}
{% set client = vpn.clients[name] %}
{% set server = vpn.servers[name] %}

client
dev {{ client.dev }}
proto {{ server.proto }}
remote area11.joehazzers.com 1194
{% if client.resolv_retry is defined %}
resolv-retry {{ client.resolv_retry }}
{% endif %}

{% if client.nobind %}
nobind
{% endif %}

{% if client.security is defined %}
user {{ client.security.user }}
group {{ client.security.group }}
{% endif %}

{% if client.persist is defined %}
{% for name, ok in client.persist.iteritems() %}
{% if ok %}
persist-{{ name }}
{% endif %}
{% endfor %}
{% endif %}

ca {{ ca.dest_dir }}/ca.crt
cert {{ client.pki.cert }}
key {{ client.pki.key }}

{% if client.remote_cert_tls is defined %}
remote-cert-tls {{ client.remote_cert_tls }}
{% endif %}

{% if server.compression is defined %}
comp-{{ server.compression }}
{% endif %}

# Set log file verbosity.
verb 3

# Silence repeating messages
mute 20

